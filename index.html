<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>New tab</title>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
  <link href="style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://m.w3newbie.com/you-tube.css">


  <!-- Background picture change on every new tab opened-->
  <link href="stylebackgroundchange.css" rel="stylesheet" />
  <div class = "backgroundChange">
      <script src="resize.js"> </script> 
  </div>
  
</head>
<body>

    <!-- Navigation Bar: Topic Selector-->

    <!--responsive nav bar-->
    --<nav class = "navbar navbar-expand-md navbar-dark bg-dark">
       
        <!--logo-->
        <a class="navbar-brand" href="#">
          <img src="logo.JPG" alt="logo" width="80" height="80">
      </a>

      <div class="flex-container">
       <form class="search" action="">
          <select class = "input">

              <option value = "fairtrade"><a href="#"> Fair Trade</a></li>
                <option  value = "innovation"><a href="#">Innovation</a></li>
                  <option value = "Infrastructure"><a href="#">Infrastructure</a></li>
                   <option value = "environment"><a href="#">Environmental Sustainability</a></li>
                       <option value = "pollution"><a href="#">Consumption & Production</a></li>
                       </select>
                       <input type = "submit" value = "Find Articles">
                   </form>
               </div>

           </nav>



           <!--Script for drop down nav bar to change to text selected-->






           <!--Script for API-->
           <div class="container">
            <ul class="news-list"></ul>
        </div>

        <script>
            const searchFrom = document.querySelector('.search');
            const input = document.querySelector('.input');
            const newsList = document.querySelector('.news-list');

            searchFrom.addEventListener('submit', retrieve);

            function retrieve(e) {
                
                newsList.innerHTML = ''
                e.preventDefault()
                let topic = input.value;
                const apiKey = 'R67xub5MH8FbrUMnSODynY8ilBX9qEMK'

                let url = `https://api.nytimes.com/svc/search/v2/articlesearch.json?q=${topic}&api-key=${apiKey}`
                console.log(url)
                fetch(url).then((res) => {
                    return res.json()
                }).then((data) => {
                // to trouble shoot: use console.log and click inspect in the browser and go to console to see the output
                // this shows all the data (open it up to see all the information)
                console.log(data);
                // each article is within the docs array (data.response.docs)
                // an example is the line right below this one, showing the headline
                console.log(data.response.docs[0].headline);
                data.response.docs.forEach(doc =>{
                    // for each of the 10 elements in the array, a list item is created
                    let li = document.createElement('li');
                    let h1 = document.createElement('h1');
                    let h2 = document.createElement('h2');
                    let a = document.createElement('a');
                    let p = document.createElement('p');

                    // sets the list content to the headline.main (check inspect > console to find it)
                    h1.textContent = doc.headline.main;
                    // adds the "h1" to each list element
                    li.appendChild(h1);

                    // setting link component
                    a.setAttribute('href', doc.web_url);
                    a.setAttribute('target', '_blank');
                    a.textContent = "READ";
                    li.appendChild(a);
                    
                    // the approach above can be implemented to add any piece of info to the list item (date, subtitle, etc.) for example: 

                    // uses the <p> element to add the abstract for each article as well. 
                    p.textContent = doc.abstract; 
                    li.appendChild(p);

                    // uses the <h2> element to display the date
                    h2.textContent = doc.pub_date; // ** SHOULD FIGURE OUT WAY TO CONVERT THIS TO A BETTER FORMAT
                    li.appendChild(h2);

                    // adds each list element to the overall list (ul)
                    newsList.appendChild(li);
                })
            }).catch((error)=> {
                // for troubleshooting (inspect > console to see the error printed out)
                console.log(error);
            })
        }
    </script>





</body>
</html>




